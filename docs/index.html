<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
  <title>Welcome to Esprerial</title>
</head>

<body>
  <main class="container">
    <h1>Welcome to Esprerial Example! ðŸ”Œâš¡</h1>
    <button onclick="serial.begin()">Connect your microcontroller</button>
    <a href="https://github.com/usini/esprerial">Get it on Github - https://github.com/usini/esprerial</a>
  </main>
  <div class="container">
    <textarea rows="10" id="rx"></textarea>
    <input id="tx" type="text">  
  </div>

</body>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/usini/esprerial/dist/esprerial.min.js"></script>
<script>
  function serialRead(message) {
    document.getElementById("rx").value += message + "\r\n";
    document.getElementById("rx").scrollTop = document.getElementById("rx").scrollHeight
  }

  document.getElementById("tx").addEventListener("keypress", function(event) {
    if(event.key == "Enter") {
      event.preventDefault();
      serial.write(document.getElementById("tx").value);
      document.getElementById("tx").value = "";
    }
  });


  serial = new Esprerial();
  serial.setRead(serialRead);
</script>

</html>